### MANUEL VPS KURULUM REHBERİ ###

Bu rehberi kullanarak projeyi manuel olarak VPS'nize kurabilirsiniz.

=== ADIM 1: VPS'DE TEMİZLİK VE HAZIRLIK ===

SSH ile VPS'nize bağlanın:
ssh root@69.62.110.158

Şu komutları sırayla çalıştırın:

# Eski servisi durdur
systemctl stop ayyildizhaber || true
systemctl disable ayyildizhaber || true

# Dizinleri temizle
rm -rf /var/www/ayyildizhaber/*
cd /var/www/ayyildizhaber

# Python virtual environment oluştur
python3 -m venv venv
source venv/bin/activate
pip install --upgrade pip

# Temel paketleri yükle
pip install flask flask-sqlalchemy flask-login werkzeug gunicorn psycopg2-binary apscheduler beautifulsoup4 requests trafilatura lxml feedparser python-dateutil email-validator

=== ADIM 2: PROJE DOSYALARINI YÜKLEME ===

Windows'ta proje klasöründe:

1. WinRAR veya 7-Zip ile projeyi sıkıştırın:
   - Tüm dosyaları seçin (CTRL+A)
   - __pycache__, .git, venv, cache klasörlerini seçimden çıkarın
   - "ayyildizhaber.zip" olarak sıkıştırın

2. FileZilla veya WinSCP ile VPS'ye yükleyin:
   - Sunucu: 69.62.110.158
   - Kullanıcı: root
   - ayyildizhaber.zip dosyasını /tmp/ klasörüne yükleyin

=== ADIM 3: VPS'DE KURULUMU TAMAMLAMA ===

SSH'da devam edin:

# Zip dosyasını çıkar
cd /var/www/ayyildizhaber
unzip /tmp/ayyildizhaber.zip
rm /tmp/ayyildizhaber.zip

# Çevre değişkenlerini ayarla
cat > .env << 'EOF'
DATABASE_URL=postgresql://ayyildizhaber:ayyildizhaber123@localhost/ayyildizhaber
SESSION_SECRET=ayyildizhaber-super-secret-key-2025
FLASK_ENV=production
PYTHONPATH=/var/www/ayyildizhaber
EOF

# Virtual environment'ı aktifleştir ve paketleri yükle
source venv/bin/activate
if [ -f requirements-vps.txt ]; then
    pip install -r requirements-vps.txt
fi

# Veritabanı tablolarını oluştur
export DATABASE_URL=postgresql://ayyildizhaber:ayyildizhaber123@localhost/ayyildizhaber
export SESSION_SECRET=ayyildizhaber-super-secret-key-2025
export FLASK_ENV=production
export PYTHONPATH=/var/www/ayyildizhaber

python3 -c "
import sys
sys.path.insert(0, '/var/www/ayyildizhaber')
from app import app, db
with app.app_context():
    db.create_all()
    print('Veritabanı tabloları oluşturuldu')
"

# Dosya izinlerini ayarla
chown -R www-data:www-data /var/www/ayyildizhaber
chmod -R 755 /var/www/ayyildizhaber
mkdir -p static/uploads
chown -R www-data:www-data static/uploads
chmod -R 775 static/uploads

# Systemd servisi yeniden başlat
systemctl daemon-reload
systemctl enable ayyildizhaber
systemctl start ayyildizhaber
systemctl restart nginx

# Durumu kontrol et
systemctl status ayyildizhaber

=== SONUÇ ===

Kurulum tamamlandıktan sonra:
- Site: http://69.62.110.158
- Admin: http://69.62.110.158/admin (admin@gmail.com / admin123)

=== SORUN GİDERME ===

Hata kontrolü:
tail -f /var/log/ayyildizhaber/error.log

Servis yeniden başlatma:
systemctl restart ayyildizhaber
systemctl restart nginx